---
layout: base.njk
permalink: "/games/{% if pagination.pageNumber > 0 %}page/{{ pagination.pageNumber + 1 }}/{% endif %}"
pagination:
  data: collections.games        # paginate the games collection
  size: 12                       # games per page
  alias: pageGames               # items available as 'pageGames' in the template
eleventyComputed:
  title: "All Games{% if pagination.pageNumber > 0 %} — Page {{ pagination.pageNumber + 1 }}{% endif %} | {{ site.title }}"
  description: "Browse all {{ collections.games | length }} games{% if pagination.pageNumber > 0 %}, page {{ pagination.pageNumber + 1 }} of {{ pagination.hrefs | length }}{% endif %}"
---

<div class="container">
  <div class="games-header">
    <h1>All Games</h1>
    <p class="game-count">
      {{ collections.games | length }} total —
      Page {{ pagination.pageNumber + 1 }} of {{ pagination.hrefs | length }}
    </p>
  </div>

  <div class="games-grid">
    {% for game in pageGames %}
      {% include "components/game-card.njk" %}
    {% endfor %}
  </div>

  {# Pagination nav #}
  {% set totalPages = pagination.hrefs | length %}
  {% set current = pagination.pageNumber %}
  <nav class="pagination">
    {% if current > 0 %}
      <a href="{{ pagination.hrefs[current - 1] }}">← Previous</a>
    {% endif %}

    {% for i in range(0, totalPages - 1) %}
      {% if i == current %}
        <span class="current">{{ i + 1 }}</span>
      {% else %}
        <a href="{{ pagination.hrefs[i] }}">{{ i + 1 }}</a>
      {% endif %}
    {% endfor %}

    {% if current + 1 < totalPages %}
      <a href="{{ pagination.hrefs[current + 1] }}">Next →</a>
    {% endif %}
  </nav>
</div>